<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CoffeeHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <style>
      /* For hovers and pseudo-selectors as per the question */
      .form-input:focus {
        outline: none;
        box-shadow: 0 0 0 2px rgb(245 158 11 / 0.5);
        border-color: rgb(245 158 11);
      }

      .btn-hover:hover {
        background-color: rgb(217 119 6);
        transform: scale(1.05);
        transition: all 0.3s ease;
      }

      .coffee-card:hover {
        transform: scale(1.05);
        transition: all 0.3s ease;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }

      .nav-icon:hover {
        color: rgb(245 158 11);
        transform: scale(1.1);
        transition: all 0.3s ease;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-amber-50 to-orange-100 min-h-screen">
    <nav class="bg-amber-900 text-white p-4 shadow-lg">
      <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-2xl font-bold">CoffeeHub</h1>
        <div class="flex space-x-6">
          <a href="#home" class="nav-icon text-xl"
            ><i class="fas fa-home"></i
          ></a>
          <a href="#coffee" class="nav-icon text-xl"
            ><i class="fas fa-coffee"></i
          ></a>
          <a href="#contact" class="nav-icon text-xl"
            ><i class="fas fa-envelope"></i
          ></a>
        </div>
      </div>
    </nav>

    <section
      id="home"
      class="relative py-32 px-4 bg-cover bg-center bg-no-repeat"
      style="
        background-image: linear-gradient(
            rgba(0, 0, 0, 0.5),
            rgba(0, 0, 0, 0.5)
          ),
          url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');
      "
    >
      <div class="container mx-auto text-center">
        <h2
          class="text-4xl md:text-6xl font-bold text-white mb-6 drop-shadow-lg"
        >
          Welcome to CoffeeHub
        </h2>
        <p class="text-lg md:text-xl text-amber-200 mb-8 drop-shadow-md">
          Discover the world's finest hot coffee drinks
        </p>
        <button
          onclick="scrollToSection('coffee')"
          class="bg-amber-600 text-white px-8 py-3 rounded-full btn-hover font-semibold shadow-lg"
        >
          Explore Coffees
        </button>
      </div>
    </section>

    <section class="py-12 px-4 bg-white">
      <div class="container mx-auto">
        <h3 class="text-3xl font-bold text-amber-900 text-center mb-8">
          Learn About Coffee
        </h3>

        <div class="mb-8">
          <h4 class="text-xl font-semibold text-amber-800 text-center mb-4">
            Coffee Brewing Method
          </h4>
          <video class="w-full max-w-2xl mx-auto rounded-lg shadow-lg" controls>
            <source src="Set2 Video.mp4" type="video/mp4" />
            <track
              kind="subtitles"
              src="subtitles.vtt"
              srclang="en"
              label="English"
            />
            Your browser does not support the video tag.
          </video>
        </div>

        <div class="mb-8">
          <h4
            class="text-xl font-semibold text-amber-800 text-center mb-4 mt-20"
          >
            Coffee Types Description
          </h4>
          <audio class="w-full max-w-2xl mx-auto" controls>
            <source src="set2 audio.mp3" type="audio/mpeg" />
            Your browser does not support the audio element.
          </audio>
        </div>
      </div>
    </section>

    <section
      id="contact"
      class="py-12 px-4 bg-gradient-to-r from-amber-100 to-orange-100"
    >
      <div class="container mx-auto max-w-md">
        <h3 class="text-3xl font-bold text-amber-900 text-center mb-8">
          Tell Us About Yourself
        </h3>
        <form id="userForm" class="space-y-6">
          <div>
            <label class="block text-amber-800 font-semibold mb-2">Name</label>
            <input
              type="text"
              id="userName"
              class="form-input w-full p-3 rounded-lg border-2 border-amber-300 focus:outline-none"
              required
            />
          </div>

          <div>
            <label class="block text-amber-800 font-semibold mb-2">Email</label>
            <input
              type="email"
              id="userEmail"
              class="form-input w-full p-3 rounded-lg border-2 border-amber-300 focus:outline-none"
              required
            />
          </div>

          <div>
            <label class="block text-amber-800 font-semibold mb-2"
              >Favorite Coffee</label
            >
            <input
              type="text"
              id="favoriteCoffee"
              class="form-input w-full p-3 rounded-lg border-2 border-amber-300 focus:outline-none"
              required
            />
          </div>

          <button
            type="submit"
            class="w-full bg-amber-600 text-white py-3 rounded-lg btn-hover font-semibold"
          >
            Save Preferences
          </button>
        </form>
      </div>
    </section>

    <section class="py-8 px-4 bg-amber-900 text-white">
      <div class="container mx-auto text-center">
        <h3 class="text-2xl font-bold mb-4">Your Location</h3>
        <div id="locationInfo" class="text-lg">
          <p>Requesting location permission...</p>
        </div>
      </div>
    </section>

    <section id="welcomeMessage" class="py-8 px-4 bg-green-100 hidden">
      <div class="container mx-auto text-center">
        <h3 class="text-2xl font-bold text-green-800" id="welcomeText"></h3>
      </div>
    </section>

    <section id="coffee" class="py-12 px-4">
      <div class="container mx-auto">
        <h3 class="text-3xl font-bold text-amber-900 text-center mb-8">
          Popular Hot Coffee Drinks
        </h3>

        <div
          class="mb-8 flex flex-col sm:flex-row gap-4 justify-center items-center"
        >
          <div class="flex gap-2">
            <input
              type="text"
              id="searchInput"
              placeholder="Search coffee..."
              class="form-input px-4 py-2 rounded-lg border-2 border-amber-300 focus:outline-none"
            />
            <button
              onclick="searchCoffees()"
              class="bg-amber-600 text-white px-6 py-2 rounded-lg btn-hover"
            >
              <i class="fas fa-search"></i> Search
            </button>
          </div>

          <select
            id="sortOrder"
            onchange="sortCoffees()"
            class="form-input px-4 py-2 rounded-lg border-2 border-amber-300 focus:outline-none"
          >
            <option value="">Sort by Name</option>
            <option value="asc">A to Z</option>
            <option value="desc">Z to A</option>
          </select>
        </div>

        <div
          id="coffeeGrid"
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
        ></div>
      </div>
    </section>

    <footer class="bg-amber-900 text-white py-8 px-4">
      <div class="container mx-auto text-center">
        <p>&copy; 2025 CoffeeHub. All rights reserved.</p>
        <p class="mt-2">
          Made with <i class="fas fa-heart text-red-400"></i> for coffee lovers
          by 2547106
        </p>
      </div>
    </footer>

    <script>
      let allCoffees = [];
      let displayedCoffees = [];

      document.addEventListener("DOMContentLoaded", function () {
        checkWelcomeMessage();
        getLocation();
        fetchCoffees();

        document
          .getElementById("userForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            saveUserPreferences();
          });
      });

      function saveUserPreferences() {
        const name = document.getElementById("userName").value;
        const email = document.getElementById("userEmail").value;
        const favoriteCoffee = document.getElementById("favoriteCoffee").value;

        if (!name || !email || !favoriteCoffee) {
          alert("Please fill in all fields");
          return;
        }

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          alert("Please enter a valid email address");
          return;
        }

        localStorage.setItem("userName", name);
        localStorage.setItem("userEmail", email);
        localStorage.setItem("favoriteCoffee", favoriteCoffee);

        alert("Preferences saved successfully!");
        showWelcomeMessage();
      }

      function checkWelcomeMessage() {
        const userName = localStorage.getItem("userName");
        const favoriteCoffee = localStorage.getItem("favoriteCoffee");

        if (userName && favoriteCoffee) {
          showWelcomeMessage();
        }
      }

      function showWelcomeMessage() {
        const userName = localStorage.getItem("userName");
        const favoriteCoffee = localStorage.getItem("favoriteCoffee");

        if (userName && favoriteCoffee) {
          document.getElementById(
            "welcomeText"
          ).textContent = `Hello, ${userName}! You Love ${favoriteCoffee}.`;
          document.getElementById("welcomeMessage").classList.remove("hidden");
          // alert(`Hello, ${userName}! You Love ${favoriteCoffee}.`); removed since it requires threading because of the alert blocking the UI
        }
      }

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            function (position) {
              const lat = position.coords.latitude;
              const lon = position.coords.longitude;
              document.getElementById(
                "locationInfo"
              ).innerHTML = `<p><i class="fas fa-map-marker-alt"></i> Latitude: ${lat.toFixed(
                6
              )}</p>
                             <p><i class="fas fa-map-marker-alt"></i> Longitude: ${lon.toFixed(
                               6
                             )}</p>
                             <p><i class="fas fa-browser"></i> Browser: ${
                               navigator.userAgent.split(" ")[0]
                             }</p>`;
            },
            function (error) {
              document.getElementById(
                "locationInfo"
              ).innerHTML = `<p><i class="fas fa-exclamation-triangle"></i> Location access denied or unavailable</p>
                             <p><i class="fas fa-browser"></i> Browser: ${
                               navigator.userAgent.split(" ")[0]
                             }</p>`;
            }
          );
        } else {
          document.getElementById("locationInfo").innerHTML =
            '<p><i class="fas fa-exclamation-triangle"></i> Geolocation is not supported by this browser</p>';
        }
      }

      async function fetchCoffees() {
        try {
          const response = await fetch("https://api.sampleapis.com/coffee/hot");
          const data = await response.json();

          allCoffees = data.slice(0, 8);
          displayedCoffees = [...allCoffees];
          displayCoffees(displayedCoffees);
        } catch (error) {
          console.error("Error fetching coffee data:", error);
          document.getElementById("coffeeGrid").innerHTML =
            '<p class="text-center text-red-600">Failed to load coffee data. Please try again later.</p>';
        }
      }

      function displayCoffees(coffees) {
        const grid = document.getElementById("coffeeGrid");
        grid.innerHTML = "";

        coffees.forEach((coffee) => {
          const coffeeCard = document.createElement("div");
          coffeeCard.className =
            "coffee-card bg-white rounded-lg shadow-lg overflow-hidden cursor-pointer";

          const ingredients = Array.isArray(coffee.ingredients)
            ? coffee.ingredients.join(", ")
            : coffee.ingredients || "Not specified";

          coffeeCard.innerHTML = `
                    <img src="${coffee.image}" alt="${coffee.title}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h4 class="text-xl font-bold text-amber-900 mb-2">${coffee.title}</h4>
                        <p class="text-gray-600 text-sm mb-3">${coffee.description}</p>
                        <div class="border-t pt-2">
                            <p class="text-xs text-amber-700"><strong>Ingredients:</strong> ${ingredients}</p>
                        </div>
                    </div>
                `;

          grid.appendChild(coffeeCard);
        });
      }

      function searchCoffees() {
        const searchTerm = document
          .getElementById("searchInput")
          .value.toLowerCase();

        if (searchTerm === "") {
          displayedCoffees = [...allCoffees];
        } else {
          displayedCoffees = allCoffees.filter((coffee) =>
            coffee.title.toLowerCase().includes(searchTerm)
          );
        }

        displayCoffees(displayedCoffees);
      }

      function sortCoffees() {
        const sortOrder = document.getElementById("sortOrder").value;

        if (sortOrder === "asc") {
          displayedCoffees.sort((a, b) => a.title.localeCompare(b.title));
        } else if (sortOrder === "desc") {
          displayedCoffees.sort((a, b) => b.title.localeCompare(a.title));
        }

        displayCoffees(displayedCoffees);
      }

      function scrollToSection(sectionId) {
        document
          .getElementById(sectionId)
          .scrollIntoView({ behavior: "smooth" });
      }

      document
        .getElementById("searchInput")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            searchCoffees();
          }
        });
    </script>
  </body>
</html>
